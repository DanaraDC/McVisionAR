<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene>
      <a-assets>
        <a-asset-item
          id="burger"
          src="./../../../assets/models/burger/scene.gltf"></a-asset-item>
        <video
          id="videoFeed"
          autoplay
          playsinline
          muted
          crossorigin="anonymous"
          style="display: none"></video>
      </a-assets>

      <!-- Model 3D Burger -->
      <a-entity
        gltf-model="#burger"
        position="0 1.5 -3"
        scale="0.05 0.05 0.05"></a-entity>

      <!-- Kamera dengan latar belakang video feed -->
      <a-camera id="camera" look-controls wasd-controls>
        <a-video
          id="video-sky"
          src="#videoFeed"
          width="16"
          height="9"
          position="0 0 -5"></a-video>
      </a-camera>

      <script>
        const videoElement = document.querySelector("#videoFeed");
        const videoSky = document.querySelector("#video-sky");

        function startVideo() {
          if (videoElement.readyState >= 3) {
            console.log("Video feed started.");
          } else {
            console.log("Waiting for video feed to start...");
            setTimeout(startVideo, 100);
          }
        }

        navigator.mediaDevices
          .getUserMedia({ video: true })
          .then((stream) => {
            videoElement.srcObject = stream;
            videoElement.onplaying = startVideo;
          })
          .catch((err) => {
            console.error("Error accessing the camera:", err);
          });
      </script>
    </a-scene>
  </body>
</html>
